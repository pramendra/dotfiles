#!/usr/bin/env bash
#
# Tame CPU Hogs
# Renice heavy processes to lower priority
#

echo "ðŸ¦ Taming CPU hogs..."

# DisplayLink (External Monitors) - Often consistently high CPU
# +10 niceness = lower priority
pgrep -f "DisplayLinkUserAgent" | xargs sudo renice +10 2>/dev/null && echo "âœ… Tammed DisplayLink (+10)"

# WindowServer (macOS GUI) - Careful not to go too high or UI lags
# +5 is safe for background rendering
pgrep -f "WindowServer" | xargs sudo renice +5 2>/dev/null && echo "âœ… Tammed WindowServer (+5)"

# Chrome Renderer
# +5 for background tabs
pgrep -f "Google Chrome Helper (Renderer)" | xargs sudo renice +5 2>/dev/null && echo "âœ… Tammed Chrome Renderers (+5)"

# Spotlight Indexing
pgrep -f "mds_stores" | xargs sudo renice +15 2>/dev/null && echo "âœ… Tammed Spotlight (+15)"

echo "Done. System should feel more responsive."
